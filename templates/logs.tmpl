{{define "body"}}
{{if .Files}}
<div class="container">
	<form class="form-inline"  role="form">
		<div class="form-group">
			<label for="log-select">File: </label>
			<select id="log-select">
			{{range .Files}}
				<option value="{{.}}">{{.}}</option>
			{{end}}
			</select>
		</div>
		<div class="form-group">
			<label for="log-maxlines">maxlines: </label>
			<select id="log-maxlines">
				<option value="100">100</option>
				<option value="500">500</option>
				<option value="-1">All</option>
			</select>
		</div>
	</form>
</div>
{{end}}

<div class="container">
	<pre id="data">{{.Data}}</pre>
</div>
{{end}}

{{define "scripts"}}
{{if .Files}}
<script type="text/javascript">
	$(function() {
		$('select').on("change", function(event) {
			var file = $('#log-select').val();
			$('#log-maxlines').prop('disabled', file.indexOf('.gz') > 1 ? 'disabled' : false);
			$.ajax({
				url: {{namedurl "logs-serv"}},
				type: "GET",
				data: {
					"file": file,
					"lines": $('#log-maxlines').val(),
					"page": {{.CurrentPage}}
				},
			}).done(function(result) {
				$('#data').text(result);
			});
		});
		$('#log-maxlines').prop('disabled', $('#log-select').val().indexOf('.gz') > 1 ? 'disabled' : false);
	});
</script>
{{end}}
{{end}}
