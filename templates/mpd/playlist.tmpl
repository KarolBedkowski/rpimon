{{define "body"}}
<div class="pure-u-1">
	<h1>MPD Current Playlists</h1>
	{{if .Error}}
	<div class="warnings">
		<p>Connection error:<br/>{{.Error}}</p>
	</div>
	{{end}}
</div>

{{if not .Error}}

<div class="pure-u-1">
	<section>
		<p>
			<a class="pure-button" href="{{namedurl "mpd-pl-action" "action" "clear"}}" onclick="return RPI.confirm()">Clear</a>
		</p>
		<table class="pure-table">
			<thead>
				<tr>
					<th>Pos</th>
					<th>Album</th>
					<th>Artist</th>
					<th>track</th>
					<th>Title</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
			{{$currentSongId := .CurrentSongID}}
			{{range .Playlist}}
				{{if eq .Id $currentSongId}}
				<tr class="playlist-current-song">
				{{else}}
				<tr>
				{{end}}
					<td>{{.Pos}}</td>
					<td>{{.Album}}</td>
					<td>{{.Artist}}</td>
					<td>{{.Track}}</td>
					<td>{{.Title}}</td>
					<td><a href="{{namedurl "mpd-song-action" "song-id" .Id "action" "play"}}">Play</a>
					|
					<a href="{{namedurl "mpd-song-action" "song-id" .Id "action" "remove"}}">Remove</a>
					</td>
				</tr>
			{{end}}
			</tbody>
		</table>
	</section>
</div>

<div class="pure-g-r">
	<div class="pure-u-1-2">
		<section>
			<h2>Save Playlist</h2>
			<form action="{{namedurl "mpd-pl-save"}}" method="post">
				<label for="name">Name:</label>
				<input type="text" name="Name" id="name" required/>
				<input type="submit" value="Save" />
				<input type="hidden" name="CsrfToken" id="" value="{{.CsrfToken}}" />
			</form>
		</section>
	</div>
	<div class="pure-u-1-2">
		<section>
			<h2>Add custom</h2>
			<form action="{{namedurl "mpd-pl-add"}}" method="post">
				<label for="uri">URI:</label>
				<input type="text" name="Uri" id="uri" required/>
				<input type="submit" value="Add" />
				<input type="hidden" name="CsrfToken" id="" value="{{.CsrfToken}}" />
			</form>
		</section>
	</div>
</div>
{{end}}

<script src="/static/lib/jquery/jquery.tablesorter.min.js" type="text/javascript"></script>
<script type="text/javascript">
	$(function() {
		$('table').tablesorter({
			ignoreCase: true,
		});
		$("form").validate();
	});
</script>


{{end}}
