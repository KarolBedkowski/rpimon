{{define "body"}}

<div class="container">
	<h1>MPD Library</h1>
</div>

{{if .Error}}
<div class="container" id="error-msg-box">
	<div class="alert alert-warning">
		<p id="error-msg"></p>
	</div>
</div>

{{else}}

<div class="container">
	<h2>{{if .Path}}{{.Path}}{{else}}Library{{end}}</h2>
	{{$path := .Path}}
	{{$ml := namedurl "mpd-library"}}
	<p>
		{{if .Path}}
		<a class="btn btn-default" href="{{$ml}}?a=up&p={{$path}}" role="button">Go Up</a>
		{{end}}
	</p>
	<div class="table-responsive">
		<table class="table table-hover table-bordered table-condensed">
			<thead>
				<tr>
					<th>Name</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
			{{range .Folders}}
				<tr>
					<td><a href="{{$ml}}?p={{$path}}/{{.}}">[ {{.}} ]</a></td>
					<td>
						<a href="#" class="action" data-action="add" data-uri="{{$path}}/{{.}}">Add</a>
						| 
						<a href="#" class="action" data-action="replace" data-uri="{{$path}}/{{.}}">Replace</a>
					</td>
				</tr>
			{{end}}
			{{range .Files}}
				<tr>
					<td>{{.}}</td>
					<td>
						<a href="#" class="action" data-action="add" data-uri="{{$path}}/{{.}}">Add</a>
						|
						<a href="#" class="action" data-action="replace" data-uri="{{$path}}/{{.}}">Replace</a>
					</td>
				</tr>
			{{end}}
			</tbody>
		</table>
		<div id="pager" class="pager">
			<form>
				<button type="button" class="btn btn-default btn-xs first"><span class="glyphicon glyphicon-step-backward"></span></button>
				<button type="button" class="btn btn-default btn-xs prev"><span class="glyphicon glyphicon-chevron-left"></span></button>
				&nbsp;
				<input type="text" class="pagedisplay"></input>
				&nbsp;
				<button type="button" class="btn btn-default btn-xs next"><span class="glyphicon glyphicon-chevron-right"></span></button>
				<button type="button" class="btn btn-default btn-xs last"><span class="glyphicon glyphicon-step-forward"></span></button>
				&nbsp;
				<select class="pagesize">
					<option selected="selected" value="20">20</option>
					<option value="50">50</option>
					<option value="100">100</option>
				</select>
			</form>
		</div>
	</div>
</div>

<div class="container">
	<section>
		<p>
			<a class="btn btn-default action" data-action="add" data-uri="{{.Path}}" role="button">Add this folder</a>
			<a class="btn btn-default action" data-action="replace" data-uri="{{.Path}}" role="button">Clear playlist and this folder</a>
			&nbsp;
			<a class="btn btn-default" href="{{namedurl "mpd-control" "action" "update"}}" onclick="return RPI.confirm()" role="button">Update Library</a></li>
		</p>
	</section>
</div>

<script src="/static/lib/jquery/jquery.tablesorter.min.js" type="text/javascript"></script>
<script src="/static/lib/jquery/jquery.tablesorter.pager.js" type="text/javascript"></script>
<script src="/static/js/mpd.js" type="text/javascript" ></script>
<script type="text/javascript">
	$(function() {
		$('table').tablesorter({
			ignoreCase: true,
		}).tablesorterPager({
			container: $("#pager"),
			positionFixed: false,
			size: 20,
		});
		var ctrlUrl = "{{namedurl "mpd-control" "action" "-"}}";
		ctrlUrl = ctrlUrl.substring(0, ctrlUrl.length - 2);
		MPD.initLibraryPage(ctrlUrl, "{{namedurl "mpd-service-info"}}");
	});
</script>

{{end}}

{{end}}
