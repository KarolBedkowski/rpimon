{{define "body"}}

{{if .Error}}
<div class="container">
	<div class="alert alert-danger" id="main-alert">
		<p>Error loading library: <em>{{.Error}}</em></p>
		<a href="#" class="alert-link" onclick="location.reload()">Reload</a>
	</div>
</div>
{{else}}
<div class="container">
	<div class="col-xs-12 col-md-8">
		<ol class="breadcrumb" id="breadcrumb"></ol>
	</div>
	<div class="">
		<table class="table-hover table-bordered table-condensed" id="table-mpd-library">
			<thead>
				<tr>
					<th width="16px">&nbsp;</th>
					<th>Name</th>
					<th width="48px">&nbsp;</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		</table>
	</div>
</div>

<div class="container">
	<section>
		<p>
			<div class="btn-group btn-group-sm">
				<a class="btn btn-success ajax-action" data-action="add" data-uri="{{.Path}}" role="button">
					<span class="glyphicon glyphicon-plus"></span>
					Add this folder
				</a>
				<a class="btn btn-warning ajax-action" data-action="replace" data-uri="{{.Path}}" role="button">Clear playlist and this folder</a>
			</div>
			<div class="btn-group btn-group-sm">
				<a class="btn btn-default" href="{{namedurl "mpd-control" "action" "update"}}" role="button" id="action-update" data-uri="">
					<span class="glyphicon glyphicon-refresh"></span>
					Update Library
				</a>
				<a class="btn btn-default" href="{{namedurl "mpd-control" "action" "update"}}" role="button" id="action-update" data-uri="{{.Path}}">
					<span class="glyphicon glyphicon-refresh"></span>
					Update this folder
				</a>
			</div>
		</p>
	</section>
</div>
{{end}}
{{end}}

{{define "scripts"}}
<script src="/static/lib/jquery/jquery.dataTables.js" type="text/javascript"></script>
<script src="/static/lib/dataTables.bootstrap.js" type="text/javascript"></script>
<script src="/static/js/mpd_library.js" type="text/javascript" ></script>
<script type="text/javascript">
	$(function() {
		MPD.library.init({
			"urls": {
				"mpd-service-song-info" : {{namedurl "mpd-service-song-info"}},
				"mpd-library-action" : {{namedurl "mpd-library-action"}},
				"mpd-library-content": {{namedurl "mpd-library-content"}}
			}
		});
	});
</script>

{{end}}
