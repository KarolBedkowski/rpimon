{{define "body"}}

<div class="pure-u-1">
	<section>
		<h1>MPD Library</h1>

		{{if .Error}}
		<div class="warnings">
			<p>Connection error:<br/>{{.Error}}</p>
		</div>
		{{else}}
		{{if .Path}}
		<h2>{{.Path}}</h2>
		{{else}}
		<h2>Library</h2>
		{{end}}
		{{$path := .Path}}
		{{$ml := namedurl "mpd-library"}}
		<p>
			{{if .Path}}
			<a class="pure-button" href="{{$ml}}?a=up&p={{$path}}">Go Up</a>
			{{end}}
			&nbsp;
			<a class="pure-button" href="{{$ml}}?a=add&u={{$path}}&p={{$path}}">Add this folder</a>
			<a class="pure-button" href="{{$ml}}?a=replace&u={{$path}}&p={{$path}}" onclick="return lconfirm()">Clear playlist and this folder</a>
			&nbsp;
			<a class="pure-button" href="{{namedurl "mpd-control" "action" "update"}}" onclick="return lconfirm()">Update Library</a></li>
		</p>
		<table class="pure-table">
			<thead>
				<tr>
					<th>Name</th>
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
			{{range .Folders}}
				<tr>
					<td><a href="{{$ml}}?p={{$path}}/{{.}}">[ {{.}} ]</a></td>
					<td>
						<a href="{{$ml}}?a=add&u={{$path}}/{{.}}&p={{$path}}">Add</a>
						| 
						<a href="{{$ml}}?a=replace&u={{$path}}/{{.}}&p={{$path}}">Replace</a>
					</td>
				</tr>
			{{end}}
			{{range .Files}}
				<tr>
					<td>{{.}}</td>
					<td>
						<a href="{{$ml}}?a=add&u={{$path}}/{{.}}&p={{$path}}">Add</a>
						|
						<a href="{{$ml}}?a=replace&u={{$path}}/{{.}}&p={{$path}}">Replace</a>
					</td>
				</tr>
			{{end}}
			</tbody>
		</table>
		{{end}}
	</section>
</div>

<script src="/static/lib/jquery/jquery.tablesorter.min.js" type="text/javascript"></script>
<script type="text/javascript">
	function lconfirm() {
		return confirm('Are you sure?');
	}
	$(function() {
		$('table').tablesorter({
			ignoreCase: true,
		});
	});
</script>


{{end}}
