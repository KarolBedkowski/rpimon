{{define "body"}}

<div class="row">
	<div class="col-lg-12">
		<h1 class="page-header">Utils <small>Configuration</small></h1>
	</div>
</div>

<div class="row">
	<div class="col-lg-12">
		<div class="panel panel-default">
			<div class="panel-body">
				<form method="POST" id="form">
					<div class="form-group">
						<label for="Name">Name</label>
						<input type="text" name="Name" id="Name" value="{{.Form.Name}}" class="form-control" required />
					</div>
					<div class="form-group">
						<label for="Command">Command</label>
						<input type="text" name="Command" id="Command" value="{{.Form.Command}}" class="form-control" required />
					</div>
					<input type="hidden" name="BasePageContext.CsrfToken" id="" value="{{.CsrfToken}}" />
					<input type="hidden" name="_method" value="" id="form-method" />
					<button type="submit" class="btn btn-primary">Save</button>
					<a href="{{namedurl "utils-conf"}}" type="button" class="btn btn-default">Cancel</a>
					{{if not .New}}
					<button type="button" class="btn btn-danger" id="btn-delete">Delete</a>
					{{end}}
				</form>
			</div>
		</div>
	</div>
</div>
{{end}}

{{define "scripts"}}
<script type="text/javascript">
	$(function() {
		$("#btn-delete").on("click", function(e) {
			e.preventDefault();
			RPI.confirmDialog("Remove command?", {
				title: "Utilities",
				btnSuccess: "Remove",
				onSuccess: function() {
					$("#form-method").val("DELETE");
					$("#form").validate({onsubmit: false});
					$("#form").submit();
				}
			}).open();
		});
	});
</script>
{{end}}
